# User Experience

## Overview

Witness must be usable under extreme stress - shaking hands, bright sunlight, split-second decisions. The UX must be simple enough for anyone, regardless of technical skill, while maintaining safety features like camouflage.

## Requirements

### Onboarding

| ID | Requirement | Priority | MVP |
|----|-------------|----------|-----|
| UX-001 | Install and immediately usable | Must | Yes |
| UX-002 | Choose camouflage appearance during setup | Must | Yes |
| UX-003 | Set up witness mode activation gesture | Must | Yes |
| UX-004 | Optionally add trusted contacts | Should | Yes |
| UX-005 | No required registration steps | Must | Yes |
| UX-006 | Skip tutorial option | Should | Yes |
| UX-007 | Onboarding in under 60 seconds | Should | Yes |

### Primary User Flows

| ID | Requirement | Priority | MVP |
|----|-------------|----------|-----|
| UX-010 | Standard recording: 2 taps max to start | Must | Yes |
| UX-011 | Witness mode: Single gesture to start | Must | Yes |
| UX-012 | Stop recording: Clear, accessible button | Must | Yes |
| UX-013 | Upload confirmation visible | Must | Yes |
| UX-014 | Upload progress indication | Should | Yes |
| UX-015 | Error states clearly communicated | Must | Yes |

### UI Principles

| ID | Requirement | Priority | MVP |
|----|-------------|----------|-----|
| UX-020 | Large touch targets (48dp minimum) | Must | Yes |
| UX-021 | High contrast (visible in sunlight) | Must | Yes |
| UX-022 | Minimal steps for any action | Must | Yes |
| UX-023 | No confirmation dialogs during recording | Must | Yes |
| UX-024 | Status always visible (recording/uploading/queued) | Must | Yes |
| UX-025 | Works with gloves (larger targets) | Should | Yes |
| UX-026 | Works one-handed | Should | Yes |

### Accessibility

| ID | Requirement | Priority | MVP |
|----|-------------|----------|-----|
| UX-030 | Screen reader support | Should | Yes |
| UX-031 | High contrast option | Should | Yes |
| UX-032 | Text scaling support | Should | Yes |
| UX-033 | Haptic feedback for key actions | Must | Yes |
| UX-034 | Audio feedback option (when safe) | Could | No |

### Localization

| ID | Requirement | Priority | MVP |
|----|-------------|----------|-----|
| UX-040 | English language | Must | Yes |
| UX-041 | Spanish language | Must | Yes |
| UX-042 | Icon-driven UI (minimal text) | Must | Yes |
| UX-043 | RTL layout support | Could | No |
| UX-044 | Community translation system | Could | No |

## Acceptance Criteria

- [ ] AC-UX-1: New user can start recording within 60 seconds of install
- [ ] AC-UX-2: Recording can be started with 2 taps or less
- [ ] AC-UX-3: Witness mode activates with volume button sequence
- [ ] AC-UX-4: UI readable in direct sunlight
- [ ] AC-UX-5: Touch targets are at least 48dp
- [ ] AC-UX-6: Upload status visible at all times during/after recording
- [ ] AC-UX-7: App works in English and Spanish
- [ ] AC-UX-8: Screen reader can navigate all screens

## Technical Notes

### User Flows

#### Standard Recording Flow

```
1. Open app (via camouflage or direct)
2. Tap record button
3. Point camera, record
4. Tap stop
5. Footage uploads automatically
6. Confirmation shown
```

#### Witness Mode Flow

```
1. Perform secret gesture (volume up-up-down-down)
2. Subtle confirmation (vibration)
3. Screen stays off or shows decoy
4. Recording happens in background
5. Perform stop gesture or auto-stop
6. Footage uploads automatically
```

#### Emergency / Panic Flow (Post-MVP)

```
1. User is recording
2. Situation becomes dangerous
3. User performs panic action
4. App immediately pushes all cached footage
5. Local evidence cleared
6. App shows decoy or closes
```

### UI Components

```kotlin
// Large, high-contrast record button
@Composable
fun RecordButton(
    isRecording: Boolean,
    onClick: () -> Unit
) {
    Button(
        onClick = onClick,
        modifier = Modifier
            .size(96.dp)  // Large touch target
            .semantics { contentDescription = if (isRecording) "Stop" else "Record" },
        colors = ButtonDefaults.buttonColors(
            containerColor = if (isRecording) Color.Red else Color.White
        )
    ) {
        Icon(
            imageVector = if (isRecording) Icons.Filled.Stop else Icons.Filled.FiberManualRecord,
            contentDescription = null,
            modifier = Modifier.size(48.dp)
        )
    }
}
```

### Status Display

```kotlin
@Composable
fun StatusBar(state: RecordingState) {
    Row(
        modifier = Modifier
            .fillMaxWidth()
            .background(state.backgroundColor)
            .padding(8.dp)
    ) {
        Icon(state.icon, contentDescription = null)
        Spacer(Modifier.width(8.dp))
        Text(
            text = state.message,
            style = MaterialTheme.typography.bodyLarge,
            fontWeight = FontWeight.Bold
        )
        if (state is RecordingState.Uploading) {
            Spacer(Modifier.weight(1f))
            CircularProgressIndicator(
                progress = state.progress,
                modifier = Modifier.size(24.dp)
            )
        }
    }
}

sealed class RecordingState {
    object Idle : RecordingState()
    object Recording : RecordingState()
    data class Uploading(val progress: Float) : RecordingState()
    object Queued : RecordingState()
    object Complete : RecordingState()
    data class Error(val message: String) : RecordingState()
}
```

### Localization

Use Android string resources:

```xml
<!-- values/strings.xml (English) -->
<string name="record">Record</string>
<string name="stop">Stop</string>
<string name="uploading">Uploading...</string>
<string name="queued">Queued for upload</string>

<!-- values-es/strings.xml (Spanish) -->
<string name="record">Grabar</string>
<string name="stop">Detener</string>
<string name="uploading">Subiendo...</string>
<string name="queued">En cola para subir</string>
```

### Accessibility

```kotlin
@Composable
fun AccessibleRecordScreen() {
    val context = LocalContext.current
    val accessibilityManager = context.getSystemService(AccessibilityManager::class.java)

    // Announce state changes
    LaunchedEffect(recordingState) {
        if (accessibilityManager?.isEnabled == true) {
            val announcement = when (recordingState) {
                RecordingState.Recording -> context.getString(R.string.a11y_recording_started)
                RecordingState.Complete -> context.getString(R.string.a11y_recording_complete)
                // ...
            }
            // Announce to screen reader
        }
    }
}
```

### High Contrast Mode

```kotlin
val HighContrastColorScheme = lightColorScheme(
    primary = Color.Black,
    onPrimary = Color.White,
    background = Color.White,
    onBackground = Color.Black,
    surface = Color.White,
    onSurface = Color.Black,
    error = Color.Red,
    onError = Color.White
)
```

## Open Questions

| Question | Status |
|----------|--------|
| Default language detection? | Use system locale |
| Tutorial on first launch? | Brief, skippable |
| Haptic patterns for different states? | Single pulse for start, double for stop |
| Dark mode support? | Yes, but high contrast takes priority |
